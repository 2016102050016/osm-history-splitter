
OpenStreetMap History Splitter
==============================

This splitter has been developed to split [full-experimental planet dumps](http://wiki.openstreetmap.org/wiki/Planet.osm/full) but it's also possible to split regular [planet dumps](http://wiki.openstreetmap.org/wiki/Planet.osm) with it. It's based on the readers and writers of the [Jochen Topfs](https://github.com/joto) great osmium framework. To be able to work with history files, I created an own [fork](https://github.com/MaZderMind/osmium) of it but all changes are about to be merged to Jochens master.

This is the tool used to create the extracts hosted on [gwdg](http://ftp5.gwdg.de/pub/misc/openstreetmap/osm-full-history-extracts/).

The splitter currently only supports simple bounding-boxes and the [hardcut-algorithm](https://github.com/MaZderMind/OpenStreetMap-History-API/blob/0.1/splitter/hardcut.hpp). Dumps created using that algorithm have the following characteristics:
* ways are cropped at bbox boundaries
* relations contain only members that exist in the extract
* ways and relations are reference-complete
* relations referring to relations that come later in the file are missing this references
* ways that have only one node inside the bbox are missing from the output
* only versions of an object that are inside the bboxes are in the extract, some versions of an object may be missing

Later versions will add other algorithms and polygon-support.


Build it
========
In order to compile the splitter, you'll first need the [osmium framework](https://github.com/MaZderMind/osmium) and all its prequisites. It does not need to be built, it just needs to be referenced in the Makefile. You'll also want the pbf support as .pbf-files can be written between 7 and 20 times faster then .xml.bz2-files. For this you'll need a [version of OSM-binary](https://github.com/MaZderMind/OSM-binary) that supports storing history information.

